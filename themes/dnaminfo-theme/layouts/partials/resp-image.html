{{/* Automatically resizes images and generates an srcset of images */}}
{{- $small := "" -}}
{{- $medium := "" -}}
{{- $large := "" -}}
{{- if ge .image.Width "600" -}}
    {{- $small = .image.Resize "600x q100" -}}
{{- if ge .image.Width "820" -}}
    {{- $medium = .image.Resize "820x q100" -}}
{{- if ge .image.Width "1250" -}}
    {{- $large = .image.Resize "1250x q100" -}}
{{- end -}}
{{- end -}}
{{- end -}}
{{ $sizes := .sizes | default "(min-width: 1600px) 75vw, 100vw" }}
{{- if not .nolink -}}<a href="{{ .image.RelPermalink }}">{{- end -}}
<img class="{{ .class }}" width="100%" height="auto"
    alt="{{ .alt }}" loading="lazy"
    sizes="{{ $sizes }}"
    src="{{ .image.RelPermalink }}"
    srcset="
    {{- with $small }}{{ .RelPermalink }} 600w{{ end -}}
    {{- with $medium -}}, {{ .RelPermalink }} 820w{{ end -}}
    {{- with $large -}}, {{ .RelPermalink }} 1250w{{ end -}}
    "
/>
{{- if not .nolink -}}</a>{{- end -}}