{{/* Usage: 
    {{% figure src="fig-link" id="fig-id" class="fullwidth" alt="alt-text"
        caption="figure caption"
    %}} 
*/}}
{{- $img := resources.Get (.Get "src") -}}
<figure class='{{ .Get "class" }}'>
{{- if (.Get "caption") -}}
{{- $fig_id := .Get "id" | default (path.Base $img.RelPermalink) -}}
<label for="fig-{{ $fig_id }}" class="margin-toggle toggle-with-word">caption</label>
<input type="checkbox" id="fig-{{ $fig_id }}" class="margin-toggle" />
<figcaption class="marginnote">
    {{ .Get "caption" | markdownify }}
</figcaption>
{{- end -}}
{{- $image_options := dict "image" $img "alt" (.Get "alt") -}}
{{- partial "resp-image" $image_options -}}
</figure>